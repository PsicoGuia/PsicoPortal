<!--
  Generated template for the Register page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color='primary'>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title><img alt="The Smokers Store" src="assets/img/logo.png" (click)="navCtrl.setRoot('Home');"></ion-title>
    <ion-buttons class='cart-mobile' end>
      <button ion-button clear [navPush]="'Cart'" >
        <ion-icon name="md-cart" color="light"></ion-icon>
        <ion-badge item-right color='secondary' *ngIf="cartService.cartProducts.length>0">{{cartService.cartProducts.length}}</ion-badge>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>


<ion-content padding>
  <div class="max-page-wid">
    <h3 class="blue" padding>REGISTRO</h3>

    <form [formGroup]="myForm" (ngSubmit)="registerForm()" margin-bottom>
      <ion-item>
        <ion-label stacked>Correo electrónico*</ion-label>
        <ion-input type="email" autocapitalize="off" formControlName="email"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label stacked>Contraseña*</ion-label>
        <ion-input type="password" formControlName="password"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label stacked>Confirmar Contraseña*</ion-label>
        <ion-input type="password" formControlName="validatePassword"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label stacked>Nombres*</ion-label>
        <ion-input type="text" formControlName="firstName"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label stacked>Apellido*</ion-label>
        <ion-input type="text" formControlName="lastName"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label stacked>Teléfono*</ion-label>
        <ion-input type="number" formControlName="phone"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label stacked>País</ion-label>
        <ion-input type="text" disabled value="Colombia"></ion-input>
        <ion-input type="number" hidden formControlName="country"></ion-input>
      </ion-item>
      <div class="autocomplete" *ngIf="!selectCity">
         <ion-searchbar
           #mainSearchbar
           placeholder="Ciudad"
           (ionInput)="getItems($event)"
           (ionClear)="clearSearch()"
           debounce=500
           (keydown)='pressKey($event.keyCode)'>
         </ion-searchbar>
          <ion-list *ngIf="_flagClear">
              <ion-item *ngIf="citys.length >= 1" [ngClass]="{active: (_activeSearch == 0)}" (click)="setCity(citys[0])">
                   {{citys[0]}}
              </ion-item>
              <ion-item *ngIf="citys.length >= 2" [ngClass]="{active: (_activeSearch == 1)}" (click)="setCity(citys[1])">
                   {{citys[1]}}
              </ion-item>
              <ion-item *ngIf="citys.length >= 3" [ngClass]="{active: (_activeSearch == 2)}" (click)="setCity(citys[2])">
                   {{citys[2]}}
              </ion-item>
         </ion-list>
       </div>
      <ion-item *ngIf="selectCity" (click)="noCity()">
        <ion-label stacked>Ciudad*</ion-label>
        <ion-input type="text" formControlName="city" disabled value="{{selectCity.name}}"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label stacked>Dirección*</ion-label>
        <ion-input type="text" formControlName="address"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label stacked>Descripción dirección</ion-label>
        <ion-input type="text" formControlName="notes" placeholder="Información adicional sobre tu dirección"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label stacked>Telefono del referido</ion-label>
        <ion-input type="phone" formControlName="refered" [(ngModel)]="refered"></ion-input>
      </ion-item>
      <div class="term-conditions">
        <ion-label><ion-checkbox formControlName="term_cond"></ion-checkbox> Acepto <a (click)="navCtrl.setRoot('TermsConditionsPage')"><b>términos y condiciones</b></a></ion-label>          
      </div>
      <button ion-button type="submit" block color="secondary" [disabled]="!myForm.value.term_cond">Registrarse</button>
    </form>
  </div>
</ion-content>
